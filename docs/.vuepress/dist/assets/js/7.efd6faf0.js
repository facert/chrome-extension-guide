(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{352:function(t,s,a){t.exports=a.p+"assets/img/load_extension.bb448709.png"},353:function(t,s,a){t.exports=a.p+"assets/img/view_background.466bb437.png"},354:function(t,s){t.exports="data:image/png;base64,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"},355:function(t,s,a){t.exports=a.p+"assets/img/click_details.697ff3d9.png"},356:function(t,s,a){t.exports=a.p+"assets/img/options.5d4cf321.png"},413:function(t,s,a){"use strict";a.r(s);var n=a(42),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"入门教程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#入门教程"}},[t._v("#")]),t._v(" 入门教程")]),t._v(" "),n("p",[t._v("扩展由不同但相互联系的组件组成。组件可以包括 "),n("RouterLink",{attrs:{to:"/guide/background_content.html"}},[t._v("后台脚本")]),t._v("，"),n("RouterLink",{attrs:{to:"/guide/content_scripts.html"}},[t._v("内容脚本")]),t._v("，"),n("RouterLink",{attrs:{to:"/guide/options.html"}},[t._v("选项页")]),t._v("，"),n("RouterLink",{attrs:{to:"/guide/user_interface.html"}},[t._v("交互页面")]),t._v("和各种逻辑文件。扩展组件是使用 Web 开发技术创建的：HTML，CSS 和 JavaScript。扩展的组件各有其功能，并且是可选的。")],1),t._v(" "),n("p",[t._v("本教程将构建一个扩展，允许用户更改 developer.chrome.com 上任何页面的背景颜色。 我们将使用许多核心组件来介绍它们之间的关系。")]),t._v(" "),n("p",[t._v("首先，创建一个新目录来保存扩展名的文件。")]),t._v(" "),n("p",[t._v("完整的扩展程序可以在"),n("a",{attrs:{href:"./assets/get_started_complete.zip"}},[t._v("此处")]),t._v("下载。")]),t._v(" "),n("h3",{attrs:{id:"创建-manifest"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建-manifest"}},[t._v("#")]),t._v(" 创建 Manifest")]),t._v(" "),n("p",[t._v("扩展始于 "),n("RouterLink",{attrs:{to:"/guide/manifest.html"}},[t._v("manifest")]),t._v("，我们先创建一个 manifest.json 文件，包含如下代码。")],1),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v(' {\n    "name": "Getting Started Example",\n    "version": "1.0",\n    "description": "Build an Extension!",\n    "manifest_version": 2\n  }\n')])])]),n("p",[t._v("包含 manifest 文件的目录可在开发人员模式下以其当前状态添加为扩展。")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("在浏览器地址栏中输入 chrome://extensions, 打开"),n("strong",[t._v("扩展管理")]),t._v("页面。")]),t._v(" "),n("ul",[n("li",[t._v("也可以通过单击 Chrome 菜单，将鼠标悬停在"),n("strong",[t._v("更多工具")]),t._v("上，然后选择"),n("strong",[t._v("扩展程序")]),t._v("来打开"),n("strong",[t._v("扩展程序管理")]),t._v("页面。")])])]),t._v(" "),n("li",[n("p",[t._v("通过单击"),n("strong",[t._v("开发人员模式")]),t._v("旁边的切换开关启用开发人员模式。")])]),t._v(" "),n("li",[n("p",[t._v("单击"),n("strong",[t._v("加载已解压的扩展程序")]),t._v("按钮，然后选择扩展目录。")])])]),t._v(" "),n("p",[n("img",{attrs:{src:a(352),alt:"load_extension.png"}})]),t._v(" "),n("p",[t._v("该扩展程序已成功安装。 由于 manifest 中未包含任何图标，因此将为扩展名创建通用工具栏图标。")]),t._v(" "),n("h3",{attrs:{id:"增加指令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#增加指令"}},[t._v("#")]),t._v(" 增加指令")]),t._v(" "),n("p",[t._v("尽管已安装完扩展，但还没有程序逻辑。通过创建名为 background.js 的文件并将其放置在扩展目录中，来引入"),n("RouterLink",{attrs:{to:"/guide/background_content.html"}},[t._v("后台脚本")]),t._v("。")],1),t._v(" "),n("p",[t._v("后台脚本和许多其他重要组件一样必须在 manifest 中注册。 在 manifest 中注册后台脚本会告诉扩展要引用哪个文件，以及该文件的行为。")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v(' {\n    "name": "Getting Started Example",\n    "version": "1.0",\n    "description": "Build an Extension!",\n    "background": {\n      "scripts": ["background.js"],\n      "persistent": false\n    },\n    "manifest_version": 2\n  }\n')])])]),n("p",[t._v("现在，该扩展程序知道它包含一个非持久性后台脚本，并将扫描注册文件中需要监听的重要事件。")]),t._v(" "),n("p",[t._v("该插件监听被安装后，来自持久化变量的消息。首先在后台脚本中包含一个 "),n("a",{attrs:{href:"https://developer.chrome.com/runtime#event-onInstalled",target:"_blank",rel:"noopener noreferrer"}},[t._v("runtime.onInstalled"),n("OutboundLink")],1),t._v(" 的监听事件。在 onInstalled 监听器内部，扩展使用 "),n("a",{attrs:{href:"https://developer.chrome.com/storage",target:"_blank",rel:"noopener noreferrer"}},[t._v("storage"),n("OutboundLink")],1),t._v(" API 设置一个值。这将允许多个扩展组件访问该值并进行更新。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("chrome"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("runtime"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onInstalled"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    chrome"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("storage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sync"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("color"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#3aa757'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"The color is green."')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("大部分 API，包括 "),n("a",{attrs:{href:"https://developer.chrome.com/storage",target:"_blank",rel:"noopener noreferrer"}},[t._v("storage"),n("OutboundLink")],1),t._v(" api，必须被注册在 manifest 的 "),n("em",[t._v("permissions")]),t._v(" 字段中给插件使用。")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v(' {\n    "name": "Getting Started Example",\n    "version": "1.0",\n    "description": "Build an Extension!",\n    "permissions": ["storage"],\n    "background": {\n      "scripts": ["background.js"],\n      "persistent": false\n    },\n    "manifest_version": 2\n  }\n\n')])])]),n("p",[t._v("进到扩展管理页面，然后单击"),n("strong",[t._v("重新加载")]),t._v("。 能看到一个带有蓝色链接（背景页）的新字段 "),n("strong",[t._v("查看视图")]),t._v("。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(353),alt:"view_background.png"}})]),t._v(" "),n("p",[t._v('点击链接，查看后台脚本的 console.log。 显示 "The color is green."')]),t._v(" "),n("h3",{attrs:{id:"引入交互界面"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#引入交互界面"}},[t._v("#")]),t._v(" 引入交互界面")]),t._v(" "),n("p",[t._v("扩展可以有多种形式的"),n("RouterLink",{attrs:{to:"/guide/user_interface.html"}},[t._v("用户界面")]),t._v("，这次我们使用 "),n("em",[t._v("popup")]),t._v(" 弹窗。 创建一个名为 popup.html 的文件并将其添加到该目录。该扩展程序通过点击按钮来更改背景颜色。")],1),t._v(" "),n("div",{staticClass:"language-html extra-class"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token doctype"}},[t._v("<!DOCTYPE html>")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token style"}},[n("span",{pre:!0,attrs:{class:"token language-css"}},[t._v("\n        "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("button")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("height")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 30px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("width")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 30px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("outline")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" none"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      ")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("changeColor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("p",[t._v("与后台脚本一样，需要在 page_action 下的 manifest 中将此文件指定为 popup 弹出窗口。")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('  {\n    "name": "Getting Started Example",\n    "version": "1.0",\n    "description": "Build an Extension!",\n    "permissions": ["storage"],\n    "background": {\n      "scripts": ["background.js"],\n      "persistent": false\n    },\n    "page_action": {\n      "default_popup": "popup.html"\n    },\n    "manifest_version": 2\n  }\n')])])]),n("p",[t._v("工具栏图标的名称也包含在 page_action 的 default_icons 字段下。 在"),n("a",{attrs:{href:"https://developer.chrome.com/extensions/examples/tutorials/get_started/images.zip",target:"_blank",rel:"noopener noreferrer"}},[t._v("此处"),n("OutboundLink")],1),t._v("下载 images 文件夹，将其解压缩，放置在扩展程序的目录中。更新 manifest，以便让扩展程序知道如何使用图像。")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v(' {\n    "name": "Getting Started Example",\n    "version": "1.0",\n    "description": "Build an Extension!",\n    "permissions": ["storage"],\n    "background": {\n      "scripts": ["background.js"],\n      "persistent": false\n    },\n    "page_action": {\n      "default_popup": "popup.html",\n      "default_icon": {\n        "16": "images/get_started16.png",\n        "32": "images/get_started32.png",\n        "48": "images/get_started48.png",\n        "128": "images/get_started128.png"\n      }\n    },\n    "manifest_version": 2\n  }\n')])])]),n("p",[t._v("扩展程序也会在扩展程序管理页面上显示图像，权限警告和网站图标。这些图像在 manifest 的 icons 下指定。")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('  {\n    "name": "Getting Started Example",\n    "version": "1.0",\n    "description": "Build an Extension!",\n    "permissions": ["storage"],\n    "background": {\n      "scripts": ["background.js"],\n      "persistent": false\n    },\n    "page_action": {\n      "default_popup": "popup.html",\n      "default_icon": {\n        "16": "images/get_started16.png",\n        "32": "images/get_started32.png",\n        "48": "images/get_started48.png",\n        "128": "images/get_started128.png"\n      }\n    },\n    "icons": {\n      "16": "images/get_started16.png",\n      "32": "images/get_started32.png",\n      "48": "images/get_started48.png",\n      "128": "images/get_started128.png"\n    },\n    "manifest_version": 2\n  }\n')])])]),n("p",[t._v("如果在此阶段重新加载扩展，它将包含一个灰度图标，但不会有任何功能差异。因为 page_action 在 manifest 已声明，因此由扩展决定何时告诉浏览器用户可与 popup.html 进行交互。")]),t._v(" "),n("p",[t._v("在 runtime.onInstalled 侦听器事件中，使用 "),n("a",{attrs:{href:"https://developer.chrome.com/declarativeContent",target:"_blank",rel:"noopener noreferrer"}},[t._v("declarativeContent"),n("OutboundLink")],1),t._v(" API 将声明的规则添加到后台脚本中。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v(" chrome"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("runtime"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onInstalled"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    chrome"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("storage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sync"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("color"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#3aa757'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'The color is green.'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    chrome"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("declarativeContent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onPageChanged"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeRules")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      chrome"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("declarativeContent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onPageChanged"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addRules")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        conditions"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("chrome"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("declarativeContent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PageStateMatcher")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          pageUrl"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("hostEquals"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'developer.chrome.com'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            actions"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("chrome"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("declarativeContent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ShowPageAction")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("此扩展需要 "),n("a",{attrs:{href:"https://developer.chrome.com/declarativeContent",target:"_blank",rel:"noopener noreferrer"}},[t._v("declarativeContent"),n("OutboundLink")],1),t._v(" api 的权限。")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v(' {\n    "name": "Getting Started Example",\n  ...\n    "permissions": ["declarativeContent", "storage"],\n  ...\n  }\n')])])]),n("p",[t._v("现在，当用户访问到包含 developer.chrome.com 的 URL 时，浏览器将在工具栏中显示一个全彩页面操作图标。当该图标为全彩时，用户可以单击它以查看popup.html。\n"),n("img",{attrs:{src:a(354),alt:"popup_grey.png"}})]),t._v(" "),n("p",[t._v("弹出界面的最后一步是为按钮添加颜色。 使用以下代码创建一个名为 popup.js的文件并将其添加到扩展目录。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" changeColor "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'changeColor'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  chrome"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("storage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sync"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'color'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    changeColor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("backgroundColor "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("color"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    changeColor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAttribute")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'value'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("color"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("此代码从 popup.html 获取按钮，并从存储中拿到颜色值。然后，它将此颜色用作按钮的背景。将 popup.js script 标签包含到 popup.html 中。")]),t._v(" "),n("div",{staticClass:"language-html extra-class"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token doctype"}},[t._v("<!DOCTYPE html>")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n...\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("changeColor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("popup.js"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}}),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("p",[t._v("重新加载扩展以查看绿色按钮。")]),t._v(" "),n("h3",{attrs:{id:"逻辑层"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#逻辑层"}},[t._v("#")]),t._v(" 逻辑层")]),t._v(" "),n("p",[t._v("现在，该扩展程序知道该弹出窗口应对 developer.chrome.com 上的用户可用，并显示一个彩色按钮，但需要逻辑来进行进一步的用户交互。更新 popup.js 以包含以下代码。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" changeColor "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'changeColor'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  changeColor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onclick")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("element")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" color "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" element"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    chrome"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tabs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("query")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("active"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" currentWindow"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("tabs")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      chrome"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tabs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("executeScript")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n          tabs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("code"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'document.body.style.backgroundColor = \"'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" color "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\";'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("更新的代码在按钮上添加了 onclick 事件，该事件执行以代码方式注入的内容脚本。将页面的背景色变成与按钮相同的颜色。使用代码注入可以允许用户调用内容脚本，而不用将不需要的代码自动插入到网页中。")]),t._v(" "),n("p",[t._v("manifest 将需要 activeTab 权限，以允许扩展程序临时访问 tabs API。 这使扩展程序可以调用 tabs.executeScript。")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('  {\n    "name": "Getting Started Example",\n  ...\n    "permissions": ["activeTab", "declarativeContent", "storage"],\n  ...\n  }\n')])])]),n("p",[t._v("该扩展程序现在可以正常使用了！重新加载扩展程序，刷新此页面，打开弹出窗口，然后单击按钮将其变为绿色！ 但是，某些用户可能希望将背景更改为其他颜色。")]),t._v(" "),n("h3",{attrs:{id:"给用户选项"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#给用户选项"}},[t._v("#")]),t._v(" 给用户选项")]),t._v(" "),n("p",[t._v("该扩展程序当前仅允许用户将背景更改为绿色。包含一个选项页面使用户可以更好地控制扩展功能，从而进一步自定义其浏览体验。")]),t._v(" "),n("p",[t._v("首先在目录中创建一个名为 options.html 的文件，并包含以下代码。")]),t._v(" "),n("div",{staticClass:"language-html extra-class"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[t._v(" "),n("span",{pre:!0,attrs:{class:"token doctype"}},[t._v("<!DOCTYPE html>")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token style"}},[n("span",{pre:!0,attrs:{class:"token language-css"}},[t._v("\n        "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("button")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("height")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 30px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("width")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 30px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("outline")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" none"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("margin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 10px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      ")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("buttonDiv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Choose a different background color!"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("options.js"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}}),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("p",[t._v("然后在 manifest 的 options_page 中注册。")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('{\n    "name": "Getting Started Example",\n    ...\n    "options_page": "options.html",\n    ...\n    "manifest_version": 2\n  }\n')])])]),n("p",[t._v("重新加载扩展程序，点击"),n("strong",[t._v("详情")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(355),alt:"click_details.png"}})]),t._v(" "),n("p",[t._v("向下滚动详细信息页面，然后选择"),n("strong",[t._v("扩展选项")]),t._v("以查看选项页面，尽管当前该页面将显示为空白。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(356),alt:"options.png"}})]),t._v(" "),n("p",[t._v("最后一步是添加选项逻辑。 使用以下代码在扩展目录中创建一个名为 options.js 的文件。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" page "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'buttonDiv'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" kButtonColors "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#3aa757'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#e8453c'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#f9bb2d'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#4688f1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructOptions")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("kButtonColors")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" item "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("of")]),t._v(" kButtonColors"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" button "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'button'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      button"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("backgroundColor "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" item"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      button"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'click'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        chrome"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("storage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sync"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("color"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" item"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'color is '")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" item"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      page"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("button"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructOptions")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("kButtonColors"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("提供了四个颜色选项，然后使用 onclick 事件监听器将它们生成为选项页面上的按钮。用户单击按钮时，它将更新扩展程序全局存储中的颜色值。由于所有扩展名文件都从全局存储中提取颜色信息，因此无需更新其他值。")]),t._v(" "),n("h3",{attrs:{id:"下一步"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#下一步"}},[t._v("#")]),t._v(" 下一步")]),t._v(" "),n("p",[t._v("恭喜你！该目录现在包含一个功能齐全的 Chrome 扩展程序，尽管比较简单。")]),t._v(" "),n("p",[t._v("下一步是什么？")]),t._v(" "),n("ul",[n("li",[n("p",[n("RouterLink",{attrs:{to:"/guide/overview.html"}},[t._v("Chrome扩展程序概述")]),t._v("在总体上介绍了有关扩展程序架构的详细信息，以及开发人员希望熟悉的一些特定概念。")],1)]),t._v(" "),n("li",[n("p",[t._v("在"),n("RouterLink",{attrs:{to:"/guide/tut_debugging.html"}},[t._v("调试教程")]),t._v("中了解可用于调试扩展的选项。")],1)]),t._v(" "),n("li",[n("p",[t._v("Chrome 扩展程序可以访问功能强大的 API，而这些 API 均超出开放网络所提供的范围。 "),n("a",{attrs:{href:"https://developer.chrome.com/api_index",target:"_blank",rel:"noopener noreferrer"}},[t._v("chrome.*API文档"),n("OutboundLink")],1),t._v(" 将介绍每个 API。")])]),t._v(" "),n("li",[n("p",[n("RouterLink",{attrs:{to:"/guide/devguide.html"}},[t._v("开发人员指南")]),t._v("还有许多其他链接，这些链接指向与高级扩展创建相关的文档。")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);